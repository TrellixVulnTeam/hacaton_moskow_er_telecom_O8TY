<!DOCTYPE html>
<html>
    <head>
        <title>Создание карты</title>
        <script src="https://maps.api.2gis.ru/2.0/loader.js"></script>

    </head>
    <body>
        <table cellspacing="0" cellpadding="0" border="0" width="100%">
            <tr style="width: 100%; height: 50px;"></tr>
            <tr>
                <td style="width: 30%;">
                        <div style="padding-left:10%">
                            <p>Показ объекта с большим количеством подключений</p>
                            <p>Обект - {{tel}}</p>
                                    <p>Количество подключений </p>
                                    <p>== {{kolpod}} ==</p>

                                <form action="/mapss/" method="post">
                                    <input type="submit" name="index" value="Очистить"></form>
                        </div>

                </td>
                <td style="width: 50%;">
                    <div id="map" style="width: 100%; height: 400px;"></div>
                           <script type="text/javascript">
                                let lcc={{lcc}};
                                let pcc={{pcc}};
                                let zz={{zoom}};
                                let cord=[];
                                {% for tt in spis_json %};
                                sll=[];
                                sll.push({{tt[0]}});
                                sll.push({{tt[1]}});
                                cord.push(sll);
                                {%end%};
                                let kol={{kolpod}};
                                //alert(cord[0][1]);
                                //alert(lcc);
                                console.log(cord[0])
                               DG.then(function() {
                                    var map;
                                    var myIcon_red = DG.icon({
                                                    iconUrl: "../static/red_icon.png",
                                                    iconSize: [40, 60],
                                                    iconAnchor: [0, 30]
                                                });


                                    var myIcon_blue = DG.icon({
                                                    iconUrl: "../static/blue_icon.png",
                                                    iconSize: [40, 60],
                                                    iconAnchor: [0, 30]
                                                });
                                    map =DG.map('map', {
                                        center: [lcc,pcc],
                                        zoom: zz
                                                });
                                    DG.marker([lcc,pcc],{icon: myIcon_red}).addTo(map).bindPopup('adrfact');

                                   //myDivIcon = DG.divIcon({
                                   //    iconSize: [70, 20],
                                   //     html: '<b style="color:blue;">Объект с 15 подключениями</b>'
                                   //});

                                   for (var i=0; i < kol ; i=i+1) {
                                           DG.marker(cord[i],{icon: myIcon_blue}).addTo(map);
                                          };
                                });


                            </script>

                </td>
                <td style="width: 20%;">
                </td>
            </tr>
        </table>
    </body>
</html>